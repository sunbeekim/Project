CREATE TABLE IF NOT EXISTS SearchCondition (
    id INT NOT NULL AUTO_INCREMENT,
    nation VARCHAR(100),
    startYear VARCHAR(10),
    endYear VARCHAR(10),
    title VARCHAR(255),
    createdAt DATETIME DEFAULT CURRENT_TIMESTAMP,
    totalMovies INT DEFAULT 0, -- 총 영화 수
    uniqueMovies INT DEFAULT 0, -- 고유 영화 수
    PRIMARY KEY (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


CREATE TABLE IF NOT EXISTS Movie (
    id INT NOT NULL AUTO_INCREMENT,
    movieSeq VARCHAR(20) UNIQUE, -- 영화 고유 코드
    title VARCHAR(200),
    titleEng VARCHAR(200),
    genre VARCHAR(100),
    nation VARCHAR(50),
    prodYear VARCHAR(4),
    plot TEXT, -- 기본 줄거리
    runtime VARCHAR(10),
    rating VARCHAR(50),
    company VARCHAR(200),
    PRIMARY KEY (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


CREATE TABLE IF NOT EXISTS MovieSearch (
    id INT NOT NULL AUTO_INCREMENT,
    searchConditionId INT NOT NULL,
    movieId INT NOT NULL,
    PRIMARY KEY (id),
    FOREIGN KEY (searchConditionId) REFERENCES SearchCondition(id) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (movieId) REFERENCES Movie(id) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


CREATE TABLE IF NOT EXISTS Director (
    id INT NOT NULL AUTO_INCREMENT,
    name VARCHAR(100) UNIQUE,
    PRIMARY KEY (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


CREATE TABLE IF NOT EXISTS MovieDirector (
    id INT NOT NULL AUTO_INCREMENT,
    movieId INT NOT NULL,
    directorId INT NOT NULL,
    PRIMARY KEY (id),
    FOREIGN KEY (movieId) REFERENCES Movie(id) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (directorId) REFERENCES Director(id) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


CREATE TABLE IF NOT EXISTS Actor (
    id INT NOT NULL AUTO_INCREMENT,
    name VARCHAR(100) UNIQUE,
    PRIMARY KEY (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


CREATE TABLE IF NOT EXISTS MovieActor (
    id INT NOT NULL AUTO_INCREMENT,
    movieId INT NOT NULL,
    actorId INT NOT NULL,
    PRIMARY KEY (id),
    FOREIGN KEY (movieId) REFERENCES Movie(id) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (actorId) REFERENCES Actor(id) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


CREATE TABLE IF NOT EXISTS Poster (
    id INT NOT NULL AUTO_INCREMENT,
    movieId INT NOT NULL,
    posterUrl TEXT NOT NULL,
    PRIMARY KEY (id),
    FOREIGN KEY (movieId) REFERENCES Movie(id) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


CREATE TABLE IF NOT EXISTS Plot (
    id INT NOT NULL AUTO_INCREMENT,
    movieId INT NOT NULL,
    languageCode VARCHAR(10) NOT NULL, -- 언어 코드 (예: "ko", "en", "ja")
    plot TEXT NOT NULL, -- 해당 언어로 된 줄거리
    PRIMARY KEY (id),
    FOREIGN KEY (movieId) REFERENCES Movie(id) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;




